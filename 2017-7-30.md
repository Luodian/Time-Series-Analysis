# 数据异常综述

### 时间序列异常

分析时间序列时，经常会出现一些特殊的数据或者数据段，它们的波动与其他数据的波动有着显著的不同，这就称为异常点，若序列中存在着异常点，就会使传统的建模，估计及检验方法陷入困境，因此对于 Faulty Dagnosis 是非常重要的。

### 导致异常的原因

各种各样，主要是突发性的随机小概率事件，气候突变，基因突变，甚至是仪器收集信息的误差等等都算作是。

### 异常的分类

按照表现形式：点异常（outlier），模式异常（outlier pattern）。

- 对于点异常（outlier，离群点），又有几种分类方式：加性异常点 ( AO : addtionaloutlier)、革新异常点 (IO:innovativeoutlier)、水平漂移 (LS : levelshift) 和暂时变化(TC:temporary change)。

  加性异常点：孤立的异常点，并不波及到后面的观测值。

  革新异常点：通常涉及到时间序列的内在相关结构，往往成片出现。

- 对于模式异常（outlier pattern）

  > 借一行解释什么叫时间序列的模式：时间序列的模式指时间序列的某种变化特征，它可以是时间序列离散化之后的符号，或者是时间序列的傅里叶变换系数等。
  >
  > **通过提取时间序列的模式，将时间序列变换到模式空间，就得到了时间序列的模式表示。**

  模式高度异常

  模式宽度异常

  模式均值和标准差异常

  ![](http://opmza2br0.bkt.clouddn.com/17-7-30/19747890.jpg)

### 检测异常的常用方法

1. 基于假设检验的诊断方法

   必须已知数据的分布特征模型。

2. 基于线性模型下统计诊断的方法

   - 残差分析

     从统计效果来看，异常点就是拟合效果较差的点。

   - 影响分析

     主要考察对统计推断具有较大影响的点，如果实验数据落在预测的范围内，则认为该数据点不会对以后**数据回归关系**有影响。

   这两种方法只适合于**经转换满足经典线性回归各项假设条件的时间序列**。

3. 基于聚类的诊断方法

   不属于任何类的数据点就是异常数据点，典型算法有（DBSCAN,CHAMELEON），但是这些算法的主要目的是用于发现离群的一个类别。

4. 基于距离的诊断方法

5. 基于密度的诊断方法

   根据数据点自身的邻域来判断其是否属于异常点，即这些点相对于它们的局部邻域是否异常？

6. 基于相似度的诊断方法

   通过使用当前序列和已有的无错序列进行相似性的匹配（可以是精确匹配，也可以是形状匹配，即在一定范围内允许波形的畸变，变换，漂移，伸缩）

   这种做法的优势在于仅仅处理形状，可以在线处理，速度很快。

7. 基于极值理论的诊断方法

   这种方法的重点在于如何选取临界值。

   > 这种方法不是太懂：当样本量不超过200时，C分别取3（高敏感），3.5（中敏感），6（低敏感，也就意味着可以更加容错）

   一般运用极值方法构造临界值的方法有两个：

   1. 有限样本近似：Hsing的三元近似，Rootzen的误差估计法，Worsley的Bonferroni上下界法
   2. 利用近似的Gumbel分位数，并且采取加速收敛的方法应当使结果更为可信。

   这种方式显然对AO类型的异常比较好检验，AO和IO同时出现也比较方便检测，但是对于异常的波动值较小时不太容易检测出来（or基本检测不出来）

### 思考

当前在入门了一段时间TSA问题之后，已经较为明确面对的问题方向。

现如今主要将异常分为**点异常**和**段异常**，我自己对这个问题的感觉就像是监督学习中的分类一样，对于一个点，是将其分类为正常还是异常，可以通过去学习之前的模式而得到一个概率上的分类结果。对于一个段（这个还不太确定），应该将其类似于傅里叶变换，从时域转换到模式域，再通过之前的学习状况去检测转换之后的模式属于正常or异常。

如果将异常检测看成是ML的一个问题（如果时间效率能够满足），那么使用什么样的学习，分类方法就是问题的关键了。

目前最快的判定方式是基于波形图的判定，不涉及具体数据的处理。

前面提到的几种判定方式，也有提到聚类的诊断方法（似乎这种方法也有缺陷），可能会将不同的异常点划分到同一个类别中（我也不知道是否应该增加分类，去检测出更多分类的异常点？），机器学习的功底很弱，不太确定这个是否可行。

下一步需要针对这里的一些链接进行学习，进行算法级别，而不只是思想级别的学习。

[知乎-TSA中异常的检测算法](https://www.zhihu.com/question/47070186/answer/104216143)

 